---
layout: post
title: SubSonic3 Works on Mono! - Nathan Bridgewater
date: '2010-08-19T00:52:00.001+01:00'
author: solrevdev
tags:
modified_time: '2010-08-19T00:52:27.861+01:00'
blogger_id: tag:blogger.com,1999:blog-31446756.post-5780575008867089078
blogger_orig_url: https://solrevdev.com/2010/08/subsonic3-works-on-mono-nathan.html
---

<div class='posterous_autopost'><div class="posterous_bookmarklet_entry"> <blockquote><div>  			<p><a href="http://www.subsonicproject.com"><img src="http://www.subsonicproject.com/content/images/SubSonicSMall.png" height="41" alt="SubSonic  Project" width="280" style="border-width: 0px; margin-bottom: 1em; float: right; height: 41px; margin-left: 1em;" /></a></p><p>So a couple weeks ago I decided to test a few changes made to <a href="http://www.subsonicproject.com">SubSonic3</a> that fixed a LINQ evaluation bug related to medium trust. Using a simple console app on linux/mono, I tested basic data access to a SQLite database using repository mode, and to my surprise it worked!&nbsp;</p>  <p><a href="http://www.mono-project.com"><img title="Mono-gorilla-aqua.100px" src="http://www.integratedwebsystems.com/wp-content/uploads/2010/08/Monogorillaaqua.100px1.png" border="0" height="120" alt="Mono-gorilla-aqua.100px" width="100" style="border: 0px none; margin: 0px 10px 10px 0px; display: inline; float: left; height: 120px;" /></a></p><p></p>  <p>I've always been a big fan of SubSonic since its 2.0 version, which I used for a mid-sized e-commerce site. With a totally rewritten core, 3.0 uses LINQ (language integrated query) for all of its data access providing a great alternative to Dblinq for the Mono platform.</p>  <p>&nbsp;</p>  <p>&nbsp;</p>  <p><span></span></p>  <p>SubSonic3 supports <a href="http://www.subsonicproject.com/docs/Using_ActiveRecord">ActiveRecord</a>, <a href="http://subsonicproject.com/docs/Using_SimpleRepository">Repository</a>, and <a href="http://www.subsonicproject.com/docs/Using_AdvancedTemplates">Custom Linq</a> modes, which give you the flexibility to build code-first or database-first.&nbsp; SubSonic3 is not an ORM (object relational mapping) like <a href="http://www.nhibernate.com/">NHibernate</a>, but it can behave like one when you use Repository Mode using POCO (plain old CLR object) representations of your tables. SubSonic handles the mapping and database query generation itself based on the database provider configured. Its intention is to allow you to build code-first and let the persistence of the object be non-critical to your application. It can even migrate your class definition changes (table schema) to the database automatically during runtime; however, it still has the flexibility to let you design your database with keys, indexes, and constraints yourself without using the automatic migration. The <a href="http://www.subsonicproject.com">SubSonic website</a> has a <a href="http://subsonicproject.com/docs/Simple_Repo_5_Minute_Demo">great demo</a> showing this capability.</p>  <h3>Database Independence</h3>  <p>To make SubSonc3 truly database agnostic, you have to use Repository mode. Active Record and Custom Linq modes DO support multiple database engines, but they all require custom class generation which is hard-wired to those engines. So when you change database types like from MySql to MSSQL or vice-versa, you have to regenerate your classes.</p>  <p>With Repository mode, you simply change your connection string in the app.config. It will use the 2.0 Data Provider model provided by the database engine client and the definition of your POCO classes to determine the SQL syntax and schema to use.&nbsp; SubSonic is pre-wired with MSSql, SQLite, MySql, and a generic ANSI Sql syntax support. There's been lots of talk about implementing Oracle and PostgreSql, which may already work in ActiveRecord or LinqTemplates, but are not yet in the Core assembly for use with Repository.</p>  <h3>Decoupled â€“ Mocking for Unit Tests and Framework Independence</h3>  <p>Another big advantage of Repository is the ability to decouple your data framework from your application completely. Since the POCO objects are not directly tied to SubSonic, they can be re-used with other frameworks like <a href="http://www.nhibernate.com">NHibernate</a> or the latest <a href="http://blogs.msdn.com/b/adonet/archive/2010/07/14/ctp4codefirstwalkthrough.aspx">Entity Framework 4</a> without touching a single line of application code. It also opens the door to mocking and testability. Dependency Injection frameworks like <a href="http://unity.codeplex.com/">Unity</a> or <a href="http://structuremap.github.com/structuremap/index.html">StructureMap</a> work perfect for this.</p>  <h3>So how about a sample?</h3>  <p>This is a silly little test application that is neither pretty nor elegant, but it proves that this code will run on Mono 2.6.3 and 2.7 (trunk) with a SQLite database. It also uses Unity for dependency injection much like you would in Asp.NET MVC. Within the project, you'll find an AppService interface used to provide the definition for simple 'business' functionality. This is meant to be generic for the sample; but in a real application, I would breakdown the services by functional purpose. They all can share the same LinqRepository data interface, which provides basic rules for LINQ-based CRUD. SubSonic3 hooks right into that and is nearly transparent to the application with the exception of a few attributes on the domain objects. There are some placeholder Mock classes there and sample mappings in the code just for show.</p>  <p><a href="http://www.integratedwebsystems.com/2010/08/subsonic3-works-on-mono#">Download the sample project</a></p>  <p>You can also get the latest version from <a href="http://code.google.com/p/iws-snippets/source/browse/#svn/SubSonicDemo">IWS Snippets project</a> subversion.</p>  			<p>  		</p></div></blockquote>    <div class="posterous_quote_citation">via <a href="http://www.integratedwebsystems.com/2010/08/subsonic3-works-on-mono/">integratedwebsystems.com</a></div> <p></p></div> <p style="font-size: 10px;"> <a href="http://posterous.com">Posted via email</a>  from <a href="http://solrev.posterous.com/subsonic3-works-on-mono-nathan-bridgewater">solution revolution</a> </p> </div>